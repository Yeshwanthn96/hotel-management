<div class="container">
  <div class="card">
    <h2 class="card-title">Create New Booking</h2>
    <form>
      <div class="form-group">
        <label for="hotel">Hotel *</label>
        <select id="hotel" [(ngModel)]="booking.hotelId" name="hotel" (change)="onHotelChange()" required>
          <option value="">Select hotel</option>
          <option *ngFor="let h of hotels" [value]="h.id">{{h.name}}</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="room">Room *</label>
        <select id="room" [(ngModel)]="booking.roomId" name="room" [disabled]="!booking.hotelId" required>
          <option value="">Select room</option>
          <option *ngFor="let r of rooms" [value]="r.id">
            Room {{r.roomNumber}} - {{r.type}} (‚Çπ{{r.price}}/night)
          </option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="checkIn">Check-in Date *</label>
        <input type="date" id="checkIn" [(ngModel)]="booking.checkInDate" name="checkIn" required>
      </div>
      
      <div class="form-group">
        <label for="checkOut">Check-out Date *</label>
        <input type="date" id="checkOut" [(ngModel)]="booking.checkOutDate" name="checkOut" required>
      </div>
      
      <div class="form-group">
        <label for="guests">Number of Guests *</label>
        <input type="number" id="guests" [(ngModel)]="booking.numberOfGuests" name="guests" min="1" max="10" required>
      </div>
      
      <div class="form-group">
        <label>Payment Method *</label>
        <div class="payment-method-selector">
          <label class="payment-option" [class.selected]="booking.paymentMethod === 'STRIPE'">
            <input type="radio" [(ngModel)]="booking.paymentMethod" name="payment" value="STRIPE">
            <span class="payment-icon">üí≥</span>
            <span>Credit / Debit Card</span>
          </label>
          <label class="payment-option" [class.selected]="booking.paymentMethod === 'PAYPAL'">
            <input type="radio" [(ngModel)]="booking.paymentMethod" name="payment" value="PAYPAL">
            <span class="payment-icon">üîµ</span>
            <span>PayPal</span>
          </label>
        </div>
      </div>

      <!-- Stripe-like Credit Card Payment Form -->
      <div *ngIf="booking.paymentMethod === 'STRIPE'" class="stripe-payment-form">
        <div class="stripe-header">
          <img src="https://upload.wikimedia.org/wikipedia/commons/b/ba/Stripe_Logo%2C_revised_2016.svg" 
               alt="Stripe" style="height: 28px;">
          <div class="secure-badge">
            <span>üîí Secure Payment</span>
          </div>
        </div>
        
        <div class="card-input-group">
          <label for="cardNumber">Card Number</label>
          <div class="card-number-wrapper">
            <input 
              type="text" 
              id="cardNumber" 
              [(ngModel)]="cardDetails.cardNumber" 
              (input)="formatCardNumber($event)"
              (blur)="validateCardNumber()"
              name="cardNumber" 
              placeholder="1234 5678 9012 3456" 
              maxlength="19"
              [class.error]="cardNumberError"
              class="stripe-input">
            <span class="card-brand" *ngIf="cardBrand">
              <img [src]="getCardBrandIcon()" [alt]="cardBrand" style="height: 24px;">
            </span>
          </div>
          <small class="error-message" *ngIf="cardNumberError">{{ cardNumberError }}</small>
          <small class="hint-message" *ngIf="!cardNumberError">Test: 4242 4242 4242 4242 (Visa) or 5555 5555 5555 4444 (Mastercard)</small>
        </div>

        <div class="card-row">
          <div class="card-input-group">
            <label for="expiry">Expiration</label>
            <input 
              type="text" 
              id="expiry" 
              [(ngModel)]="cardDetails.expiry" 
              (input)="formatExpiry($event)"
              (blur)="validateExpiry()"
              name="expiry" 
              placeholder="MM / YY" 
              maxlength="7"
              [class.error]="expiryError"
              class="stripe-input">
            <small class="error-message" *ngIf="expiryError">{{ expiryError }}</small>
            <small class="hint-message" *ngIf="!expiryError">Test: 12/25 or later</small>
          </div>
          
          <div class="card-input-group">
            <label for="cvv">CVC</label>
            <div style="position: relative;">
              <input 
                type="text" 
                id="cvv" 
                [(ngModel)]="cardDetails.cvv" 
                (input)="formatCVV($event)"
                (blur)="validateCVV()"
                name="cvv" 
                placeholder="123" 
                maxlength="4"
                [class.error]="cvvError"
                class="stripe-input">
              <span class="cvv-icon" title="3 or 4 digit security code">‚ÑπÔ∏è</span>
            </div>
            <small class="error-message" *ngIf="cvvError">{{ cvvError }}</small>
            <small class="hint-message" *ngIf="!cvvError">Test: 123</small>
          </div>
        </div>

        <div class="card-input-group">
          <label for="cardName">Cardholder Name</label>
          <input 
            type="text" 
            id="cardName" 
            [(ngModel)]="cardDetails.cardName" 
            (blur)="validateCardName()"
            name="cardName" 
            placeholder="John Doe"
            [class.error]="cardNameError"
            class="stripe-input">
          <small class="error-message" *ngIf="cardNameError">{{ cardNameError }}</small>
        </div>

        <div class="payment-summary">
          <div class="summary-row">
            <span>üõ°Ô∏è Encrypted & Secure</span>
            <span>‚úîÔ∏è PCI Compliant</span>
          </div>
        </div>
      </div>

      <!-- PayPal Payment Details -->
      <div *ngIf="booking.paymentMethod === 'PAYPAL'" class="payment-details">
        <h3 style="margin: 20px 0 15px; color: #333; font-size: 18px;">PayPal Login</h3>
        <div class="form-group">
          <label for="paypalEmail">PayPal Email *</label>
          <input type="email" id="paypalEmail" [(ngModel)]="paypalDetails.email" 
                 name="paypalEmail" placeholder="test@paypal.com">
          <small style="color: #666;">Test email: test@paypal.com</small>
        </div>
        <div class="form-group">
          <label for="paypalPassword">PayPal Password *</label>
          <input type="password" id="paypalPassword" [(ngModel)]="paypalDetails.password" 
                 name="paypalPassword" placeholder="password">
          <small style="color: #666;">Test password: password123</small>
        </div>
      </div>
      
      <div class="flex">
        <button type="button" (click)="createBooking()" class="btn btn-primary">Create Booking</button>
        <button type="button" routerLink="/bookings" class="btn btn-secondary">Cancel</button>
      </div>
    </form>
  </div>
</div>
