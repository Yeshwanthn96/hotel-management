<div class="auth-container">
  <div class="auth-card">
    <button class="close-btn" (click)="close()">&times;</button>
    
    <h2 class="auth-title">Reset Password</h2>
    <p class="auth-subtitle">Create a strong password for your account</p>

    <div *ngIf="errorMessage" class="alert alert-error">
      {{ errorMessage }}
    </div>

    <div *ngIf="successMessage" class="alert alert-success">
      {{ successMessage }}
    </div>

    <form #resetPasswordForm="ngForm" (ngSubmit)="$event.preventDefault()">
      <div class="form-group">
        <label for="newPassword">New Password</label>
        <div class="password-input-wrapper">
          <input 
            [type]="showPassword ? 'text' : 'password'" 
            id="newPassword" 
            [(ngModel)]="newPassword" 
            name="newPassword"
            (input)="onPasswordChange()"
            placeholder="Enter new password"
            [disabled]="isLoading"
            required>
          <button type="button" class="toggle-password" (click)="togglePasswordVisibility(); $event.stopPropagation()">
            <span *ngIf="!showPassword">ğŸ‘ï¸</span>
            <span *ngIf="showPassword">ğŸ™ˆ</span>
          </button>
        </div>
        
        <!-- Password Strength Indicator -->
        <div *ngIf="newPassword" class="password-strength">
          <div class="strength-bar">
            <div class="strength-fill" 
                 [style.width.%]="passwordStrength.percentage"
                 [style.background-color]="passwordStrength.color"></div>
          </div>
          <span [style.color]="passwordStrength.color">{{ passwordStrength.strength }}</span>
        </div>

        <!-- Password Requirements -->
        <ul *ngIf="newPassword && passwordErrors.length > 0" class="password-errors">
          <li *ngFor="let error of passwordErrors">{{ error }}</li>
        </ul>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirm Password</label>
        <input 
          type="password" 
          id="confirmPassword" 
          [(ngModel)]="confirmPassword" 
          name="confirmPassword"
          placeholder="Confirm your password"
          [disabled]="isLoading"
          (keydown.enter)="resetPassword(); $event.preventDefault()"
          required>
      </div>

      <button type="button" class="btn btn-primary" [disabled]="isLoading || !newPassword || !confirmPassword" (click)="resetPassword(); $event.stopPropagation()">
        <span *ngIf="!isLoading">Reset Password</span>
        <span *ngIf="isLoading">Resetting...</span>
      </button>

      <div class="auth-links">
        <a routerLink="/auth/login" style="cursor: pointer; text-decoration: none;">Back to Login</a>
      </div>
    </form>
  </div>
</div>
